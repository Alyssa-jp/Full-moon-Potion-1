<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pisces Eclipse Potion</title>
<style>
  :root{
    --stage: min(92vw, 520px);
    /* ↓ 位置がズレたらここを1～2%ずつ調整 */
    --cap-top: 7%;     /* 蓋の縦位置 */
    --cap-width: 38%;  /* 蓋の幅(%) */
    --cap-left: 31%;   /* 蓋の左位置(%) */

    --liq-left: 13%;
    --liq-top: 26%;
    --liq-width: 74%;
    --liq-height: 56%;
  }
  html,body{margin:0;height:100%;background:#000;display:grid;place-items:center}
  .stage{position:relative;width:var(--stage);aspect-ratio:1/1}
  .layer{position:absolute;inset:0}
  .layer img{position:absolute;left:0;top:0;width:100%;height:auto;user-select:none;pointer-events:none}

  /* 液体は矩形でクリップ（あとで注ぎアニメ足す） */
  .liquid-box{
    position:absolute;left:var(--liq-left);top:var(--liq-top);
    width:var(--liq-width);height:var(--liq-height);
    overflow:hidden;border-radius:26%/22%;
  }
  .liquid-box img{inset:-6% -6% -6% -6%;width:112%}

  /* 蓋の初期位置 */
  #Cap{position:absolute;width:var(--cap-width);left:var(--cap-left);top:var(--cap-top);transition:.45s}
  /* 開けたときの動き（のちほどボタン連動） */
  .open #Cap{transform:translateY(-60%) rotate(-18deg)}
  .controls{position:fixed;bottom:12px;left:50%;transform:translateX(-50%);display:flex;gap:8px}
  button{background:#161a20;color:#eaf6ff;border:1px solid #2a3648;border-radius:10px;padding:8px 12px;font-weight:600}
</style>
</head>
<body>
  <div class="stage" id="stage">
    <!-- 瓶の中の液体 -->
    <div class="liquid-box"><img src="Liquid.PNG" alt="liquid"></div>
    <!-- 瓶本体 -->
    <div class="layer"><img src="Bottle.PNG" alt="bottle"></div>
    <!-- 蓋（別レイヤー） -->
    <img id="Cap" src="Cap.PNG" alt="cap">
  </div>

  <div class="controls">
    <button id="capBtn">Open cap</button>
    <button id="tiltBtn">Tilt</button>
  </div>

<script>
  // まずは「見える・重なる」だけ確認する最小スクリプト
  const body = document.body;
  const capBtn = document.getElementById('capBtn');
  const tiltBtn = document.getElementById('tiltBtn');
  const liquid = document.querySelector('.liquid-box img');

  capBtn.onclick = ()=>{
    body.classList.toggle('open');
    capBtn.textContent = body.classList.contains('open') ? 'Close cap' : 'Open cap';
  };

  let tilted = false;
  tiltBtn.onclick = ()=>{
    tilted = !tilted;
    liquid.style.transition = 'transform .2s ease-out';
    liquid.style.transform = tilted ? 'rotate(-20deg)' : 'rotate(0deg)';
    tiltBtn.textContent = tilted ? 'Reset' : 'Tilt';
  };
</script>
</body>
</html>
